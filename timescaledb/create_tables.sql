CREATE EXTENSION IF NOT EXISTS timescaledb;

CREATE TABLE scoreboard
(
   table_name text,
   batch_size float,
   start_time timestamptz,
   end_time timestamptz
);
SELECT create_hypertable('scoreboard', by_range('start_time'));

-- create the table containing measurement values
CREATE TABLE values 
(
    if_in_bits_delta float,
    if_out_bits_delta float,
    in_bcast_pkts_delta float,
    out_bcast_pkts_delta float,
    in_bits_delta float,
    out_bits_delta float,
    in_discards_delta float,
    out_discards_delta float,
    in_errors_delta float,
    out_errors_delta float,
    in_mcast_pkts_delta float,
    out_mcast_pkts_delta float,
    in_ucast_pkts_delta float,
    out_ucast_pkts_delta float,
    _timestamp timestamptz not null,
    _processing_time float,
    _exit_time timestamptz,
    _collect_time_min timestamptz,
    metadata text references metadata(hash)
);
-- convert values table to timescaledb super-de-duper fancy-fancy timeseries format
SELECT create_hypertable('values', by_range('_timestamp'));

CREATE OR REPLACE FUNCTION hash_jsonb() RETURNS TRIGGER AS $$
BEGIN
    NEW.metadata := md5(jsonb_hash(NEW.metadata::jsonb)::text);
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER hash_jsonb
BEFORE INSERT OR UPDATE ON values
FOR EACH ROW EXECUTE PROCEDURE hash_jsonb();

-- simple metadata table storing a fair try at a hash
-- (collisions will occur eventually in md5 space)
CREATE TABLE metadata (
    data JSONB,
    hash TEXT GENERATED ALWAYS AS (md5(jsonb_hash(data)::text)) STORED
);

-- enforce uniqueness on hash
ALTER TABLE metadata ADD CONSTRAINT unique_hash UNIQUE (hash);

-- create a reverse hash index (like search index) for specific keys in 'data' column
-- gin indices get used when a table scan "outweighs" an index scan in query planner
-- this condition is not hit until there are a fair number of rows in the table (1m+)
--CREATE INDEX ON metadata USING gin(data);

-- create a reverse hash index (like a search index) for specific values in 'data' column
--CREATE INDEX ON metadata USING gin(data jsonb_path_ops);

-- we'll also want a normal btree primary key index on the hash...
ALTER TABLE metadata ADD PRIMARY KEY (hash);

-- inserts always proceed like this, with the metadata insert first, ignoring dupes.
-- Quick, clear, effective, and we know that the other side is always there.
-- INSERT INTO metadata (data) VALUES ('{"hello": "world"}') ON CONFLICT DO NOTHING;

-- INSERT INTO values (
--     if_in_bits, if_out_bits, in_bcast_pkts, out_bcast_pkts,
--     in_bits, out_bits, in_discards, out_discards,
--     in_errors, out_errors, in_mcast_pkts, out_mcast_pkts,
--     in_ucast_pkts, out_ucast_pkts,
--     _timestamp,
--     _processing_time,
--     _exit_time,
--     _collect_time_min,
--     metadata_hash
-- ) VALUES (
--     0, 0, 0, 0,
--     0, 0, 0, 0,
--     0, 0, 0, 0,
--     0, 0,
--     now(),
--     31.129,
--     now(),
--     now(),
--     '{"hello": "world"}'
-- );

-- INSERT INTO metadata (data) VALUES ('{}') ON CONFLICT DO NOTHING;

-- INSERT INTO values (
--     if_in_bits, if_out_bits, in_bcast_pkts, out_bcast_pkts,
--     in_bits, out_bits, in_discards, out_discards,
--     in_errors, out_errors, in_mcast_pkts, out_mcast_pkts,
--     in_ucast_pkts, out_ucast_pkts,
--     _timestamp,
--     _processing_time,
--     _exit_time,
--     _collect_time_min,
--     metadata_hash
-- ) VALUES (
--     0, 1829.18939, 0, 0,
--     0, 0, 0, 11378.1,
--     0, 4824092.13, 0, 0,
--     0, 0,
--     now(),
--     32.999,
--     now(),
--     now(),
--     md5(jsonb_hash('{}')::text)
-- );


-- -- dump all the data
-- select * from values join metadata on metadata_hash=hash; 

-- -- select values based on metadata: straightforward
-- select * from values where metadata->>'hello'='world';



-- approach #2, metadata stored "inline"
CREATE TABLE values_inline 
(
    if_in_bits_delta float,
    if_out_bits_delta float,
    in_bcast_pkts_delta float,
    out_bcast_pkts_delta float,
    in_bits_delta float,
    out_bits_delta float,
    in_discards_delta float,
    out_discards_delta float,
    in_errors_delta float,
    out_errors_delta float,
    in_mcast_pkts_delta float,
    out_mcast_pkts_delta float,
    in_ucast_pkts_delta float,
    out_ucast_pkts_delta float,
    _timestamp timestamptz not null,
    _processing_time float,
    _exit_time timestamptz,
    _collect_time_min timestamptz,
    metadata jsonb
);

-- convert values table to timescaledb super-de-duper fancy-fancy timeseries format
SELECT create_hypertable('values_inline', by_range('_timestamp'));

-- create a reverse hash index (like search index) for specific keys in 'data' column
-- gin indices get used when a table scan "outweighs" an index scan in query planner
-- this condition is not hit until there are a fair number of rows in the table (1m+)
-- CREATE INDEX ON values_inline USING gin(metadata);

-- create a reverse hash index (like a search index) for specific values in 'data' column
-- CREATE INDEX ON values_inline USING gin(metadata jsonb_path_ops);



-- dataset #2, wide records
CREATE TABLE values_wide
(
    in_bits_delta float,
    in_bits_rate float,
    in_bits_val float,
    in_dropped_hi_bits_delta float,
    in_dropped_hi_bits_rate float,
    in_dropped_hi_bits_val float,
    in_dropped_hi_pkts_delta float,
    in_dropped_hi_pkts_rate float,
    in_dropped_hi_pkts_val float,
    in_dropped_lo_bits_delta float,
    in_dropped_lo_bits_rate float,
    in_dropped_lo_bits_val float,
    in_dropped_lo_pkts_delta float,
    in_dropped_lo_pkts_rate float,
    in_dropped_lo_pkts_val float,
    in_fwd_inprof_bits_delta float,
    in_fwd_inprof_bits_rate float,
    in_fwd_inprof_bits_val float,
    in_fwd_inprof_pkts_delta float,
    in_fwd_inprof_pkts_rate float,
    in_fwd_inprof_pkts_val float,
    in_fwd_outprof_bits_delta float,
    in_fwd_outprof_bits_rate float,
    in_fwd_outprof_bits_val float,
    in_fwd_outprof_pkts_delta float,
    in_fwd_outprof_pkts_rate float,
    in_fwd_outprof_pkts_val float,
    in_mpls_bits_delta float,
    in_mpls_bits_rate float,
    in_mpls_bits_val float,
    in_pkts_delta float,
    in_pkts_rate float,
    in_pkts_val float,
    in_v4_bits_delta float,
    in_v4_bits_rate float,
    in_v4_bits_val float,
    in_v4_pkts_delta float,
    in_v4_pkts_rate float,
    in_v4_pkts_val float,
    in_v6_bits_delta float,
    in_v6_bits_rate float,
    in_v6_bits_val float,
    in_v6_pkts_delta float,
    in_v6_pkts_rate float,
    in_v6_pkts_val float,
    out_bits_delta float,
    out_bits_rate float,
    out_bits_val float,
    out_dropped_inprof_bits_delta float,
    out_dropped_inprof_bits_rate float,
    out_dropped_inprof_bits_val float,
    out_dropped_inprof_pkts_delta float,
    out_dropped_inprof_pkts_rate float,
    out_dropped_inprof_pkts_val float,
    out_dropped_outprof_bits_delta float,
    out_dropped_outprof_bits_rate float,
    out_dropped_outprof_bits_val float,
    out_dropped_outprof_pkts_delta float,
    out_dropped_outprof_pkts_rate float,
    out_dropped_outprof_pkts_val float,
    out_fwd_inprof_bits_delta float,
    out_fwd_inprof_bits_rate float,
    out_fwd_inprof_bits_val float,
    out_fwd_inprof_pkts_delta float,
    out_fwd_inprof_pkts_rate float,
    out_fwd_inprof_pkts_val float,
    out_fwd_outprof_bits_delta float,
    out_fwd_outprof_bits_rate float,
    out_fwd_outprof_bits_val float,
    out_fwd_outprof_pkts_delta float,
    out_fwd_outprof_pkts_rate float,
    out_fwd_outprof_pkts_val float,
    out_mpls_bits_delta float,
    out_mpls_bits_rate float,
    out_mpls_bits_val float,
    out_pkts_delta float,
    out_pkts_rate float,
    out_pkts_val float,
    out_v4_bits_delta float,
    out_v4_bits_rate float,
    out_v4_bits_val float,
    out_v4_discard_bits_delta float,
    out_v4_discard_bits_rate float,
    out_v4_discard_bits_val float,
    out_v4_discard_pkts_delta float,
    out_v4_discard_pkts_rate float,
    out_v4_discard_pkts_val float,
    out_v4_pkts_delta float,
    out_v4_pkts_rate float,
    out_v4_pkts_val float,
    out_v6_bits_delta float,
    out_v6_bits_rate float,
    out_v6_bits_val float,
    out_v6_discard_bits_delta float,
    out_v6_discard_bits_rate float,
    out_v6_discard_bits_val float,
    out_v6_discard_pkts_delta float,
    out_v6_discard_pkts_rate float,
    out_v6_discard_pkts_val float,
    out_v6_pkts_delta float,
    out_v6_pkts_rate float,
    out_v6_pkts_val float,
    queue1_sap_in_dropped_hiprio_bits_delta float,
    queue1_sap_in_dropped_hiprio_bits_rate float,
    queue1_sap_in_dropped_hiprio_bits_val float,
    queue1_sap_in_dropped_hiprio_pkts_delta float,
    queue1_sap_in_dropped_hiprio_pkts_rate float,
    queue1_sap_in_dropped_hiprio_pkts_val float,
    queue1_sap_in_dropped_loprio_bits_delta float,
    queue1_sap_in_dropped_loprio_bits_rate float,
    queue1_sap_in_dropped_loprio_bits_val float,
    queue1_sap_in_dropped_loprio_pkts_delta float,
    queue1_sap_in_dropped_loprio_pkts_rate float,
    queue1_sap_in_dropped_loprio_pkts_val float,
    queue1_sap_in_fwd_inprof_bits_delta float,
    queue1_sap_in_fwd_inprof_bits_rate float,
    queue1_sap_in_fwd_inprof_bits_val float,
    queue1_sap_in_fwd_inprof_pkts_delta float,
    queue1_sap_in_fwd_inprof_pkts_rate float,
    queue1_sap_in_fwd_inprof_pkts_val float,
    queue1_sap_in_fwd_outprof_bits_delta float,
    queue1_sap_in_fwd_outprof_bits_rate float,
    queue1_sap_in_fwd_outprof_bits_val float,
    queue1_sap_in_fwd_outprof_pkts_delta float,
    queue1_sap_in_fwd_outprof_pkts_rate float,
    queue1_sap_in_fwd_outprof_pkts_val float,
    queue1_sap_in_offered_hiprio_bits_delta float,
    queue1_sap_in_offered_hiprio_bits_rate float,
    queue1_sap_in_offered_hiprio_bits_val float,
    queue1_sap_in_offered_hiprio_pkts_delta float,
    queue1_sap_in_offered_hiprio_pkts_rate float,
    queue1_sap_in_offered_hiprio_pkts_val float,
    queue1_sap_in_offered_loprio_bits_delta float,
    queue1_sap_in_offered_loprio_bits_rate float,
    queue1_sap_in_offered_loprio_bits_val float,
    queue1_sap_in_offered_loprio_pkts_delta float,
    queue1_sap_in_offered_loprio_pkts_rate float,
    queue1_sap_in_offered_loprio_pkts_val float,
    queue1_sap_in_offered_uncolored_bits_delta float,
    queue1_sap_in_offered_uncolored_bits_rate float,
    queue1_sap_in_offered_uncolored_bits_val float,
    queue1_sap_in_offered_uncolored_pkts_delta float,
    queue1_sap_in_offered_uncolored_pkts_rate float,
    queue1_sap_in_offered_uncolored_pkts_val float,
    queue1_sap_out_dropped_inprof_bits_delta float,
    queue1_sap_out_dropped_inprof_bits_rate float,
    queue1_sap_out_dropped_inprof_bits_val float,
    queue1_sap_out_dropped_inprof_pkts_delta float,
    queue1_sap_out_dropped_inprof_pkts_rate float,
    queue1_sap_out_dropped_inprof_pkts_val float,
    queue1_sap_out_dropped_outprof_bits_delta float,
    queue1_sap_out_dropped_outprof_bits_rate float,
    queue1_sap_out_dropped_outprof_bits_val float,
    queue1_sap_out_dropped_outprof_pkts_delta float,
    queue1_sap_out_dropped_outprof_pkts_rate float,
    queue1_sap_out_dropped_outprof_pkts_val float,
    queue1_sap_out_fwd_inprof_bits_delta float,
    queue1_sap_out_fwd_inprof_bits_rate float,
    queue1_sap_out_fwd_inprof_bits_val float,
    queue1_sap_out_fwd_inprof_pkts_delta float,
    queue1_sap_out_fwd_inprof_pkts_rate float,
    queue1_sap_out_fwd_inprof_pkts_val float,
    queue1_sap_out_fwd_outprof_bits_delta float,
    queue1_sap_out_fwd_outprof_bits_rate float,
    queue1_sap_out_fwd_outprof_bits_val float,
    queue1_sap_out_fwd_outprof_pkts_delta float,
    queue1_sap_out_fwd_outprof_pkts_rate float,
    queue1_sap_out_fwd_outprof_pkts_val float,
    queue2_sap_in_dropped_hiprio_bits_delta float,
    queue2_sap_in_dropped_hiprio_bits_rate float,
    queue2_sap_in_dropped_hiprio_bits_val float,
    queue2_sap_in_dropped_hiprio_pkts_delta float,
    queue2_sap_in_dropped_hiprio_pkts_rate float,
    queue2_sap_in_dropped_hiprio_pkts_val float,
    queue2_sap_in_dropped_loprio_bits_delta float,
    queue2_sap_in_dropped_loprio_bits_rate float,
    queue2_sap_in_dropped_loprio_bits_val float,
    queue2_sap_in_dropped_loprio_pkts_delta float,
    queue2_sap_in_dropped_loprio_pkts_rate float,
    queue2_sap_in_dropped_loprio_pkts_val float,
    queue2_sap_in_fwd_inprof_bits_delta float,
    queue2_sap_in_fwd_inprof_bits_rate float,
    queue2_sap_in_fwd_inprof_bits_val float,
    queue2_sap_in_fwd_inprof_pkts_delta float,
    queue2_sap_in_fwd_inprof_pkts_rate float,
    queue2_sap_in_fwd_inprof_pkts_val float,
    queue2_sap_in_fwd_outprof_bits_delta float,
    queue2_sap_in_fwd_outprof_bits_rate float,
    queue2_sap_in_fwd_outprof_bits_val float,
    queue2_sap_in_fwd_outprof_pkts_delta float,
    queue2_sap_in_fwd_outprof_pkts_rate float,
    queue2_sap_in_fwd_outprof_pkts_val float,
    queue2_sap_in_offered_hiprio_bits_delta float,
    queue2_sap_in_offered_hiprio_bits_rate float,
    queue2_sap_in_offered_hiprio_bits_val float,
    queue2_sap_in_offered_hiprio_pkts_delta float,
    queue2_sap_in_offered_hiprio_pkts_rate float,
    queue2_sap_in_offered_hiprio_pkts_val float,
    queue2_sap_in_offered_loprio_bits_delta float,
    queue2_sap_in_offered_loprio_bits_rate float,
    queue2_sap_in_offered_loprio_bits_val float,
    queue2_sap_in_offered_loprio_pkts_delta float,
    queue2_sap_in_offered_loprio_pkts_rate float,
    queue2_sap_in_offered_loprio_pkts_val float,
    queue2_sap_in_offered_uncolored_bits_delta float,
    queue2_sap_in_offered_uncolored_bits_rate float,
    queue2_sap_in_offered_uncolored_bits_val float,
    queue2_sap_in_offered_uncolored_pkts_delta float,
    queue2_sap_in_offered_uncolored_pkts_rate float,
    queue2_sap_in_offered_uncolored_pkts_val float,
    queue2_sap_out_dropped_inprof_bits_delta float,
    queue2_sap_out_dropped_inprof_bits_rate float,
    queue2_sap_out_dropped_inprof_bits_val float,
    queue2_sap_out_dropped_inprof_pkts_delta float,
    queue2_sap_out_dropped_inprof_pkts_rate float,
    queue2_sap_out_dropped_inprof_pkts_val float,
    queue2_sap_out_dropped_outprof_bits_delta float,
    queue2_sap_out_dropped_outprof_bits_rate float,
    queue2_sap_out_dropped_outprof_bits_val float,
    queue2_sap_out_dropped_outprof_pkts_delta float,
    queue2_sap_out_dropped_outprof_pkts_rate float,
    queue2_sap_out_dropped_outprof_pkts_val float,
    queue2_sap_out_fwd_inprof_bits_delta float,
    queue2_sap_out_fwd_inprof_bits_rate float,
    queue2_sap_out_fwd_inprof_bits_val float,
    queue2_sap_out_fwd_inprof_pkts_delta float,
    queue2_sap_out_fwd_inprof_pkts_rate float,
    queue2_sap_out_fwd_inprof_pkts_val float,
    queue2_sap_out_fwd_outprof_bits_delta float,
    queue2_sap_out_fwd_outprof_bits_rate float,
    queue2_sap_out_fwd_outprof_bits_val float,
    queue2_sap_out_fwd_outprof_pkts_delta float,
    queue2_sap_out_fwd_outprof_pkts_rate float,
    queue2_sap_out_fwd_outprof_pkts_val float,
    queue3_sap_in_dropped_hiprio_bits_delta float,
    queue3_sap_in_dropped_hiprio_bits_rate float,
    queue3_sap_in_dropped_hiprio_bits_val float,
    queue3_sap_in_dropped_hiprio_pkts_delta float,
    queue3_sap_in_dropped_hiprio_pkts_rate float,
    queue3_sap_in_dropped_hiprio_pkts_val float,
    queue3_sap_in_dropped_loprio_bits_delta float,
    queue3_sap_in_dropped_loprio_bits_rate float,
    queue3_sap_in_dropped_loprio_bits_val float,
    queue3_sap_in_dropped_loprio_pkts_delta float,
    queue3_sap_in_dropped_loprio_pkts_rate float,
    queue3_sap_in_dropped_loprio_pkts_val float,
    queue3_sap_in_fwd_inprof_bits_delta float,
    queue3_sap_in_fwd_inprof_bits_rate float,
    queue3_sap_in_fwd_inprof_bits_val float,
    queue3_sap_in_fwd_inprof_pkts_delta float,
    queue3_sap_in_fwd_inprof_pkts_rate float,
    queue3_sap_in_fwd_inprof_pkts_val float,
    queue3_sap_in_fwd_outprof_bits_delta float,
    queue3_sap_in_fwd_outprof_bits_rate float,
    queue3_sap_in_fwd_outprof_bits_val float,
    queue3_sap_in_fwd_outprof_pkts_delta float,
    queue3_sap_in_fwd_outprof_pkts_rate float,
    queue3_sap_in_fwd_outprof_pkts_val float,
    queue3_sap_in_offered_hiprio_bits_delta float,
    queue3_sap_in_offered_hiprio_bits_rate float,
    queue3_sap_in_offered_hiprio_bits_val float,
    queue3_sap_in_offered_hiprio_pkts_delta float,
    queue3_sap_in_offered_hiprio_pkts_rate float,
    queue3_sap_in_offered_hiprio_pkts_val float,
    queue3_sap_in_offered_loprio_bits_delta float,
    queue3_sap_in_offered_loprio_bits_rate float,
    queue3_sap_in_offered_loprio_bits_val float,
    queue3_sap_in_offered_loprio_pkts_delta float,
    queue3_sap_in_offered_loprio_pkts_rate float,
    queue3_sap_in_offered_loprio_pkts_val float,
    queue3_sap_in_offered_uncolored_bits_delta float,
    queue3_sap_in_offered_uncolored_bits_rate float,
    queue3_sap_in_offered_uncolored_bits_val float,
    queue3_sap_in_offered_uncolored_pkts_delta float,
    queue3_sap_in_offered_uncolored_pkts_rate float,
    queue3_sap_in_offered_uncolored_pkts_val float,
    queue3_sap_out_dropped_inprof_bits_delta float,
    queue3_sap_out_dropped_inprof_bits_rate float,
    queue3_sap_out_dropped_inprof_bits_val float,
    queue3_sap_out_dropped_inprof_pkts_delta float,
    queue3_sap_out_dropped_inprof_pkts_rate float,
    queue3_sap_out_dropped_inprof_pkts_val float,
    queue3_sap_out_dropped_outprof_bits_delta float,
    queue3_sap_out_dropped_outprof_bits_rate float,
    queue3_sap_out_dropped_outprof_bits_val float,
    queue3_sap_out_dropped_outprof_pkts_delta float,
    queue3_sap_out_dropped_outprof_pkts_rate float,
    queue3_sap_out_dropped_outprof_pkts_val float,
    queue3_sap_out_fwd_inprof_bits_delta float,
    queue3_sap_out_fwd_inprof_bits_rate float,
    queue3_sap_out_fwd_inprof_bits_val float,
    queue3_sap_out_fwd_inprof_pkts_delta float,
    queue3_sap_out_fwd_inprof_pkts_rate float,
    queue3_sap_out_fwd_inprof_pkts_val float,
    queue3_sap_out_fwd_outprof_bits_delta float,
    queue3_sap_out_fwd_outprof_bits_rate float,
    queue3_sap_out_fwd_outprof_bits_val float,
    queue3_sap_out_fwd_outprof_pkts_delta float,
    queue3_sap_out_fwd_outprof_pkts_rate float,
    queue3_sap_out_fwd_outprof_pkts_val float,
    queue4_sap_in_dropped_hiprio_bits_delta float,
    queue4_sap_in_dropped_hiprio_bits_rate float,
    queue4_sap_in_dropped_hiprio_bits_val float,
    queue4_sap_in_dropped_hiprio_pkts_delta float,
    queue4_sap_in_dropped_hiprio_pkts_rate float,
    queue4_sap_in_dropped_hiprio_pkts_val float,
    queue4_sap_in_dropped_loprio_bits_delta float,
    queue4_sap_in_dropped_loprio_bits_rate float,
    queue4_sap_in_dropped_loprio_bits_val float,
    queue4_sap_in_dropped_loprio_pkts_delta float,
    queue4_sap_in_dropped_loprio_pkts_rate float,
    queue4_sap_in_dropped_loprio_pkts_val float,
    queue4_sap_in_fwd_inprof_bits_delta float,
    queue4_sap_in_fwd_inprof_bits_rate float,
    queue4_sap_in_fwd_inprof_bits_val float,
    queue4_sap_in_fwd_inprof_pkts_delta float,
    queue4_sap_in_fwd_inprof_pkts_rate float,
    queue4_sap_in_fwd_inprof_pkts_val float,
    queue4_sap_in_fwd_outprof_bits_delta float,
    queue4_sap_in_fwd_outprof_bits_rate float,
    queue4_sap_in_fwd_outprof_bits_val float,
    queue4_sap_in_fwd_outprof_pkts_delta float,
    queue4_sap_in_fwd_outprof_pkts_rate float,
    queue4_sap_in_fwd_outprof_pkts_val float,
    queue4_sap_in_offered_hiprio_bits_delta float,
    queue4_sap_in_offered_hiprio_bits_rate float,
    queue4_sap_in_offered_hiprio_bits_val float,
    queue4_sap_in_offered_hiprio_pkts_delta float,
    queue4_sap_in_offered_hiprio_pkts_rate float,
    queue4_sap_in_offered_hiprio_pkts_val float,
    queue4_sap_in_offered_loprio_bits_delta float,
    queue4_sap_in_offered_loprio_bits_rate float,
    queue4_sap_in_offered_loprio_bits_val float,
    queue4_sap_in_offered_loprio_pkts_delta float,
    queue4_sap_in_offered_loprio_pkts_rate float,
    queue4_sap_in_offered_loprio_pkts_val float,
    queue4_sap_in_offered_uncolored_bits_delta float,
    queue4_sap_in_offered_uncolored_bits_rate float,
    queue4_sap_in_offered_uncolored_bits_val float,
    queue4_sap_in_offered_uncolored_pkts_delta float,
    queue4_sap_in_offered_uncolored_pkts_rate float,
    queue4_sap_in_offered_uncolored_pkts_val float,
    queue4_sap_out_dropped_inprof_bits_delta float,
    queue4_sap_out_dropped_inprof_bits_rate float,
    queue4_sap_out_dropped_inprof_bits_val float,
    queue4_sap_out_dropped_inprof_pkts_delta float,
    queue4_sap_out_dropped_inprof_pkts_rate float,
    queue4_sap_out_dropped_inprof_pkts_val float,
    queue4_sap_out_dropped_outprof_bits_delta float,
    queue4_sap_out_dropped_outprof_bits_rate float,
    queue4_sap_out_dropped_outprof_bits_val float,
    queue4_sap_out_dropped_outprof_pkts_delta float,
    queue4_sap_out_dropped_outprof_pkts_rate float,
    queue4_sap_out_dropped_outprof_pkts_val float,
    queue4_sap_out_fwd_inprof_bits_delta float,
    queue4_sap_out_fwd_inprof_bits_rate float,
    queue4_sap_out_fwd_inprof_bits_val float,
    queue4_sap_out_fwd_inprof_pkts_delta float,
    queue4_sap_out_fwd_inprof_pkts_rate float,
    queue4_sap_out_fwd_inprof_pkts_val float,
    queue4_sap_out_fwd_outprof_bits_delta float,
    queue4_sap_out_fwd_outprof_bits_rate float,
    queue4_sap_out_fwd_outprof_bits_val float,
    queue4_sap_out_fwd_outprof_pkts_delta float,
    queue4_sap_out_fwd_outprof_pkts_rate float,
    queue4_sap_out_fwd_outprof_pkts_val float,
    queue5_sap_in_dropped_hiprio_bits_delta float,
    queue5_sap_in_dropped_hiprio_bits_rate float,
    queue5_sap_in_dropped_hiprio_bits_val float,
    queue5_sap_in_dropped_hiprio_pkts_delta float,
    queue5_sap_in_dropped_hiprio_pkts_rate float,
    queue5_sap_in_dropped_hiprio_pkts_val float,
    queue5_sap_in_dropped_loprio_bits_delta float,
    queue5_sap_in_dropped_loprio_bits_rate float,
    queue5_sap_in_dropped_loprio_bits_val float,
    queue5_sap_in_dropped_loprio_pkts_delta float,
    queue5_sap_in_dropped_loprio_pkts_rate float,
    queue5_sap_in_dropped_loprio_pkts_val float,
    queue5_sap_in_fwd_inprof_bits_delta float,
    queue5_sap_in_fwd_inprof_bits_rate float,
    queue5_sap_in_fwd_inprof_bits_val float,
    queue5_sap_in_fwd_inprof_pkts_delta float,
    queue5_sap_in_fwd_inprof_pkts_rate float,
    queue5_sap_in_fwd_inprof_pkts_val float,
    queue5_sap_in_fwd_outprof_bits_delta float,
    queue5_sap_in_fwd_outprof_bits_rate float,
    queue5_sap_in_fwd_outprof_bits_val float,
    queue5_sap_in_fwd_outprof_pkts_delta float,
    queue5_sap_in_fwd_outprof_pkts_rate float,
    queue5_sap_in_fwd_outprof_pkts_val float,
    queue5_sap_in_offered_hiprio_bits_delta float,
    queue5_sap_in_offered_hiprio_bits_rate float,
    queue5_sap_in_offered_hiprio_bits_val float,
    queue5_sap_in_offered_hiprio_pkts_delta float,
    queue5_sap_in_offered_hiprio_pkts_rate float,
    queue5_sap_in_offered_hiprio_pkts_val float,
    queue5_sap_in_offered_loprio_bits_delta float,
    queue5_sap_in_offered_loprio_bits_rate float,
    queue5_sap_in_offered_loprio_bits_val float,
    queue5_sap_in_offered_loprio_pkts_delta float,
    queue5_sap_in_offered_loprio_pkts_rate float,
    queue5_sap_in_offered_loprio_pkts_val float,
    queue5_sap_in_offered_uncolored_bits_delta float,
    queue5_sap_in_offered_uncolored_bits_rate float,
    queue5_sap_in_offered_uncolored_bits_val float,
    queue5_sap_in_offered_uncolored_pkts_delta float,
    queue5_sap_in_offered_uncolored_pkts_rate float,
    queue5_sap_in_offered_uncolored_pkts_val float,
    queue5_sap_out_dropped_inprof_bits_delta float,
    queue5_sap_out_dropped_inprof_bits_rate float,
    queue5_sap_out_dropped_inprof_bits_val float,
    queue5_sap_out_dropped_inprof_pkts_delta float,
    queue5_sap_out_dropped_inprof_pkts_rate float,
    queue5_sap_out_dropped_inprof_pkts_val float,
    queue5_sap_out_dropped_outprof_bits_delta float,
    queue5_sap_out_dropped_outprof_bits_rate float,
    queue5_sap_out_dropped_outprof_bits_val float,
    queue5_sap_out_dropped_outprof_pkts_delta float,
    queue5_sap_out_dropped_outprof_pkts_rate float,
    queue5_sap_out_dropped_outprof_pkts_val float,
    queue5_sap_out_fwd_inprof_bits_delta float,
    queue5_sap_out_fwd_inprof_bits_rate float,
    queue5_sap_out_fwd_inprof_bits_val float,
    queue5_sap_out_fwd_inprof_pkts_delta float,
    queue5_sap_out_fwd_inprof_pkts_rate float,
    queue5_sap_out_fwd_inprof_pkts_val float,
    queue5_sap_out_fwd_outprof_bits_delta float,
    queue5_sap_out_fwd_outprof_bits_rate float,
    queue5_sap_out_fwd_outprof_bits_val float,
    queue5_sap_out_fwd_outprof_pkts_delta float,
    queue5_sap_out_fwd_outprof_pkts_rate float,
    queue5_sap_out_fwd_outprof_pkts_val float,
    queue6_sap_in_dropped_hiprio_bits_delta float,
    queue6_sap_in_dropped_hiprio_bits_rate float,
    queue6_sap_in_dropped_hiprio_bits_val float,
    queue6_sap_in_dropped_hiprio_pkts_delta float,
    queue6_sap_in_dropped_hiprio_pkts_rate float,
    queue6_sap_in_dropped_hiprio_pkts_val float,
    queue6_sap_in_dropped_loprio_bits_delta float,
    queue6_sap_in_dropped_loprio_bits_rate float,
    queue6_sap_in_dropped_loprio_bits_val float,
    queue6_sap_in_dropped_loprio_pkts_delta float,
    queue6_sap_in_dropped_loprio_pkts_rate float,
    queue6_sap_in_dropped_loprio_pkts_val float,
    queue6_sap_in_fwd_inprof_bits_delta float,
    queue6_sap_in_fwd_inprof_bits_rate float,
    queue6_sap_in_fwd_inprof_bits_val float,
    queue6_sap_in_fwd_inprof_pkts_delta float,
    queue6_sap_in_fwd_inprof_pkts_rate float,
    queue6_sap_in_fwd_inprof_pkts_val float,
    queue6_sap_in_fwd_outprof_bits_delta float,
    queue6_sap_in_fwd_outprof_bits_rate float,
    queue6_sap_in_fwd_outprof_bits_val float,
    queue6_sap_in_fwd_outprof_pkts_delta float,
    queue6_sap_in_fwd_outprof_pkts_rate float,
    queue6_sap_in_fwd_outprof_pkts_val float,
    queue6_sap_in_offered_hiprio_bits_delta float,
    queue6_sap_in_offered_hiprio_bits_rate float,
    queue6_sap_in_offered_hiprio_bits_val float,
    queue6_sap_in_offered_hiprio_pkts_delta float,
    queue6_sap_in_offered_hiprio_pkts_rate float,
    queue6_sap_in_offered_hiprio_pkts_val float,
    queue6_sap_in_offered_loprio_bits_delta float,
    queue6_sap_in_offered_loprio_bits_rate float,
    queue6_sap_in_offered_loprio_bits_val float,
    queue6_sap_in_offered_loprio_pkts_delta float,
    queue6_sap_in_offered_loprio_pkts_rate float,
    queue6_sap_in_offered_loprio_pkts_val float,
    queue6_sap_in_offered_uncolored_bits_delta float,
    queue6_sap_in_offered_uncolored_bits_rate float,
    queue6_sap_in_offered_uncolored_bits_val float,
    queue6_sap_in_offered_uncolored_pkts_delta float,
    queue6_sap_in_offered_uncolored_pkts_rate float,
    queue6_sap_in_offered_uncolored_pkts_val float,
    queue6_sap_out_dropped_inprof_bits_delta float,
    queue6_sap_out_dropped_inprof_bits_rate float,
    queue6_sap_out_dropped_inprof_bits_val float,
    queue6_sap_out_dropped_inprof_pkts_delta float,
    queue6_sap_out_dropped_inprof_pkts_rate float,
    queue6_sap_out_dropped_inprof_pkts_val float,
    queue6_sap_out_dropped_outprof_bits_delta float,
    queue6_sap_out_dropped_outprof_bits_rate float,
    queue6_sap_out_dropped_outprof_bits_val float,
    queue6_sap_out_dropped_outprof_pkts_delta float,
    queue6_sap_out_dropped_outprof_pkts_rate float,
    queue6_sap_out_dropped_outprof_pkts_val float,
    queue6_sap_out_fwd_inprof_bits_delta float,
    queue6_sap_out_fwd_inprof_bits_rate float,
    queue6_sap_out_fwd_inprof_bits_val float,
    queue6_sap_out_fwd_inprof_pkts_delta float,
    queue6_sap_out_fwd_inprof_pkts_rate float,
    queue6_sap_out_fwd_inprof_pkts_val float,
    queue6_sap_out_fwd_outprof_bits_delta float,
    queue6_sap_out_fwd_outprof_bits_rate float,
    queue6_sap_out_fwd_outprof_bits_val float,
    queue6_sap_out_fwd_outprof_pkts_delta float,
    queue6_sap_out_fwd_outprof_pkts_rate float,
    queue6_sap_out_fwd_outprof_pkts_val float,
    queue7_sap_in_dropped_hiprio_bits_delta float,
    queue7_sap_in_dropped_hiprio_bits_rate float,
    queue7_sap_in_dropped_hiprio_bits_val float,
    queue7_sap_in_dropped_hiprio_pkts_delta float,
    queue7_sap_in_dropped_hiprio_pkts_rate float,
    queue7_sap_in_dropped_hiprio_pkts_val float,
    queue7_sap_in_dropped_loprio_bits_delta float,
    queue7_sap_in_dropped_loprio_bits_rate float,
    queue7_sap_in_dropped_loprio_bits_val float,
    queue7_sap_in_dropped_loprio_pkts_delta float,
    queue7_sap_in_dropped_loprio_pkts_rate float,
    queue7_sap_in_dropped_loprio_pkts_val float,
    queue7_sap_in_fwd_inprof_bits_delta float,
    queue7_sap_in_fwd_inprof_bits_rate float,
    queue7_sap_in_fwd_inprof_bits_val float,
    queue7_sap_in_fwd_inprof_pkts_delta float,
    queue7_sap_in_fwd_inprof_pkts_rate float,
    queue7_sap_in_fwd_inprof_pkts_val float,
    queue7_sap_in_fwd_outprof_bits_delta float,
    queue7_sap_in_fwd_outprof_bits_rate float,
    queue7_sap_in_fwd_outprof_bits_val float,
    queue7_sap_in_fwd_outprof_pkts_delta float,
    queue7_sap_in_fwd_outprof_pkts_rate float,
    queue7_sap_in_fwd_outprof_pkts_val float,
    queue7_sap_in_offered_hiprio_bits_delta float,
    queue7_sap_in_offered_hiprio_bits_rate float,
    queue7_sap_in_offered_hiprio_bits_val float,
    queue7_sap_in_offered_hiprio_pkts_delta float,
    queue7_sap_in_offered_hiprio_pkts_rate float,
    queue7_sap_in_offered_hiprio_pkts_val float,
    queue7_sap_in_offered_loprio_bits_delta float,
    queue7_sap_in_offered_loprio_bits_rate float,
    queue7_sap_in_offered_loprio_bits_val float,
    queue7_sap_in_offered_loprio_pkts_delta float,
    queue7_sap_in_offered_loprio_pkts_rate float,
    queue7_sap_in_offered_loprio_pkts_val float,
    queue7_sap_in_offered_uncolored_bits_delta float,
    queue7_sap_in_offered_uncolored_bits_rate float,
    queue7_sap_in_offered_uncolored_bits_val float,
    queue7_sap_in_offered_uncolored_pkts_delta float,
    queue7_sap_in_offered_uncolored_pkts_rate float,
    queue7_sap_in_offered_uncolored_pkts_val float,
    queue7_sap_out_dropped_inprof_bits_delta float,
    queue7_sap_out_dropped_inprof_bits_rate float,
    queue7_sap_out_dropped_inprof_bits_val float,
    queue7_sap_out_dropped_inprof_pkts_delta float,
    queue7_sap_out_dropped_inprof_pkts_rate float,
    queue7_sap_out_dropped_inprof_pkts_val float,
    queue7_sap_out_dropped_outprof_bits_delta float,
    queue7_sap_out_dropped_outprof_bits_rate float,
    queue7_sap_out_dropped_outprof_bits_val float,
    queue7_sap_out_dropped_outprof_pkts_delta float,
    queue7_sap_out_dropped_outprof_pkts_rate float,
    queue7_sap_out_dropped_outprof_pkts_val float,
    queue7_sap_out_fwd_inprof_bits_delta float,
    queue7_sap_out_fwd_inprof_bits_rate float,
    queue7_sap_out_fwd_inprof_bits_val float,
    queue7_sap_out_fwd_inprof_pkts_delta float,
    queue7_sap_out_fwd_inprof_pkts_rate float,
    queue7_sap_out_fwd_inprof_pkts_val float,
    queue7_sap_out_fwd_outprof_bits_delta float,
    queue7_sap_out_fwd_outprof_bits_rate float,
    queue7_sap_out_fwd_outprof_bits_val float,
    queue7_sap_out_fwd_outprof_pkts_delta float,
    queue7_sap_out_fwd_outprof_pkts_rate float,
    queue7_sap_out_fwd_outprof_pkts_val float,
    _timestamp timestamptz not null,
    _processing_time float,
    _exit_time timestamptz,
    _collect_time_min timestamptz,
    metadata text references metadata(hash)
);
SELECT create_hypertable('values_wide', by_range('_timestamp'));

CREATE OR REPLACE FUNCTION hash_jsonb() RETURNS TRIGGER AS $$
BEGIN
    NEW.metadata := md5(jsonb_hash(NEW.metadata::jsonb)::text);
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER hash_jsonb
BEFORE INSERT OR UPDATE ON values_wide
FOR EACH ROW EXECUTE PROCEDURE hash_jsonb();


-- dataset #3, wide records, inline metadata
CREATE TABLE values_wide_inline
(
    in_bits_delta float,
    in_bits_rate float,
    in_bits_val float,
    in_dropped_hi_bits_delta float,
    in_dropped_hi_bits_rate float,
    in_dropped_hi_bits_val float,
    in_dropped_hi_pkts_delta float,
    in_dropped_hi_pkts_rate float,
    in_dropped_hi_pkts_val float,
    in_dropped_lo_bits_delta float,
    in_dropped_lo_bits_rate float,
    in_dropped_lo_bits_val float,
    in_dropped_lo_pkts_delta float,
    in_dropped_lo_pkts_rate float,
    in_dropped_lo_pkts_val float,
    in_fwd_inprof_bits_delta float,
    in_fwd_inprof_bits_rate float,
    in_fwd_inprof_bits_val float,
    in_fwd_inprof_pkts_delta float,
    in_fwd_inprof_pkts_rate float,
    in_fwd_inprof_pkts_val float,
    in_fwd_outprof_bits_delta float,
    in_fwd_outprof_bits_rate float,
    in_fwd_outprof_bits_val float,
    in_fwd_outprof_pkts_delta float,
    in_fwd_outprof_pkts_rate float,
    in_fwd_outprof_pkts_val float,
    in_mpls_bits_delta float,
    in_mpls_bits_rate float,
    in_mpls_bits_val float,
    in_pkts_delta float,
    in_pkts_rate float,
    in_pkts_val float,
    in_v4_bits_delta float,
    in_v4_bits_rate float,
    in_v4_bits_val float,
    in_v4_pkts_delta float,
    in_v4_pkts_rate float,
    in_v4_pkts_val float,
    in_v6_bits_delta float,
    in_v6_bits_rate float,
    in_v6_bits_val float,
    in_v6_pkts_delta float,
    in_v6_pkts_rate float,
    in_v6_pkts_val float,
    out_bits_delta float,
    out_bits_rate float,
    out_bits_val float,
    out_dropped_inprof_bits_delta float,
    out_dropped_inprof_bits_rate float,
    out_dropped_inprof_bits_val float,
    out_dropped_inprof_pkts_delta float,
    out_dropped_inprof_pkts_rate float,
    out_dropped_inprof_pkts_val float,
    out_dropped_outprof_bits_delta float,
    out_dropped_outprof_bits_rate float,
    out_dropped_outprof_bits_val float,
    out_dropped_outprof_pkts_delta float,
    out_dropped_outprof_pkts_rate float,
    out_dropped_outprof_pkts_val float,
    out_fwd_inprof_bits_delta float,
    out_fwd_inprof_bits_rate float,
    out_fwd_inprof_bits_val float,
    out_fwd_inprof_pkts_delta float,
    out_fwd_inprof_pkts_rate float,
    out_fwd_inprof_pkts_val float,
    out_fwd_outprof_bits_delta float,
    out_fwd_outprof_bits_rate float,
    out_fwd_outprof_bits_val float,
    out_fwd_outprof_pkts_delta float,
    out_fwd_outprof_pkts_rate float,
    out_fwd_outprof_pkts_val float,
    out_mpls_bits_delta float,
    out_mpls_bits_rate float,
    out_mpls_bits_val float,
    out_pkts_delta float,
    out_pkts_rate float,
    out_pkts_val float,
    out_v4_bits_delta float,
    out_v4_bits_rate float,
    out_v4_bits_val float,
    out_v4_discard_bits_delta float,
    out_v4_discard_bits_rate float,
    out_v4_discard_bits_val float,
    out_v4_discard_pkts_delta float,
    out_v4_discard_pkts_rate float,
    out_v4_discard_pkts_val float,
    out_v4_pkts_delta float,
    out_v4_pkts_rate float,
    out_v4_pkts_val float,
    out_v6_bits_delta float,
    out_v6_bits_rate float,
    out_v6_bits_val float,
    out_v6_discard_bits_delta float,
    out_v6_discard_bits_rate float,
    out_v6_discard_bits_val float,
    out_v6_discard_pkts_delta float,
    out_v6_discard_pkts_rate float,
    out_v6_discard_pkts_val float,
    out_v6_pkts_delta float,
    out_v6_pkts_rate float,
    out_v6_pkts_val float,
    queue1_sap_in_dropped_hiprio_bits_delta float,
    queue1_sap_in_dropped_hiprio_bits_rate float,
    queue1_sap_in_dropped_hiprio_bits_val float,
    queue1_sap_in_dropped_hiprio_pkts_delta float,
    queue1_sap_in_dropped_hiprio_pkts_rate float,
    queue1_sap_in_dropped_hiprio_pkts_val float,
    queue1_sap_in_dropped_loprio_bits_delta float,
    queue1_sap_in_dropped_loprio_bits_rate float,
    queue1_sap_in_dropped_loprio_bits_val float,
    queue1_sap_in_dropped_loprio_pkts_delta float,
    queue1_sap_in_dropped_loprio_pkts_rate float,
    queue1_sap_in_dropped_loprio_pkts_val float,
    queue1_sap_in_fwd_inprof_bits_delta float,
    queue1_sap_in_fwd_inprof_bits_rate float,
    queue1_sap_in_fwd_inprof_bits_val float,
    queue1_sap_in_fwd_inprof_pkts_delta float,
    queue1_sap_in_fwd_inprof_pkts_rate float,
    queue1_sap_in_fwd_inprof_pkts_val float,
    queue1_sap_in_fwd_outprof_bits_delta float,
    queue1_sap_in_fwd_outprof_bits_rate float,
    queue1_sap_in_fwd_outprof_bits_val float,
    queue1_sap_in_fwd_outprof_pkts_delta float,
    queue1_sap_in_fwd_outprof_pkts_rate float,
    queue1_sap_in_fwd_outprof_pkts_val float,
    queue1_sap_in_offered_hiprio_bits_delta float,
    queue1_sap_in_offered_hiprio_bits_rate float,
    queue1_sap_in_offered_hiprio_bits_val float,
    queue1_sap_in_offered_hiprio_pkts_delta float,
    queue1_sap_in_offered_hiprio_pkts_rate float,
    queue1_sap_in_offered_hiprio_pkts_val float,
    queue1_sap_in_offered_loprio_bits_delta float,
    queue1_sap_in_offered_loprio_bits_rate float,
    queue1_sap_in_offered_loprio_bits_val float,
    queue1_sap_in_offered_loprio_pkts_delta float,
    queue1_sap_in_offered_loprio_pkts_rate float,
    queue1_sap_in_offered_loprio_pkts_val float,
    queue1_sap_in_offered_uncolored_bits_delta float,
    queue1_sap_in_offered_uncolored_bits_rate float,
    queue1_sap_in_offered_uncolored_bits_val float,
    queue1_sap_in_offered_uncolored_pkts_delta float,
    queue1_sap_in_offered_uncolored_pkts_rate float,
    queue1_sap_in_offered_uncolored_pkts_val float,
    queue1_sap_out_dropped_inprof_bits_delta float,
    queue1_sap_out_dropped_inprof_bits_rate float,
    queue1_sap_out_dropped_inprof_bits_val float,
    queue1_sap_out_dropped_inprof_pkts_delta float,
    queue1_sap_out_dropped_inprof_pkts_rate float,
    queue1_sap_out_dropped_inprof_pkts_val float,
    queue1_sap_out_dropped_outprof_bits_delta float,
    queue1_sap_out_dropped_outprof_bits_rate float,
    queue1_sap_out_dropped_outprof_bits_val float,
    queue1_sap_out_dropped_outprof_pkts_delta float,
    queue1_sap_out_dropped_outprof_pkts_rate float,
    queue1_sap_out_dropped_outprof_pkts_val float,
    queue1_sap_out_fwd_inprof_bits_delta float,
    queue1_sap_out_fwd_inprof_bits_rate float,
    queue1_sap_out_fwd_inprof_bits_val float,
    queue1_sap_out_fwd_inprof_pkts_delta float,
    queue1_sap_out_fwd_inprof_pkts_rate float,
    queue1_sap_out_fwd_inprof_pkts_val float,
    queue1_sap_out_fwd_outprof_bits_delta float,
    queue1_sap_out_fwd_outprof_bits_rate float,
    queue1_sap_out_fwd_outprof_bits_val float,
    queue1_sap_out_fwd_outprof_pkts_delta float,
    queue1_sap_out_fwd_outprof_pkts_rate float,
    queue1_sap_out_fwd_outprof_pkts_val float,
    queue2_sap_in_dropped_hiprio_bits_delta float,
    queue2_sap_in_dropped_hiprio_bits_rate float,
    queue2_sap_in_dropped_hiprio_bits_val float,
    queue2_sap_in_dropped_hiprio_pkts_delta float,
    queue2_sap_in_dropped_hiprio_pkts_rate float,
    queue2_sap_in_dropped_hiprio_pkts_val float,
    queue2_sap_in_dropped_loprio_bits_delta float,
    queue2_sap_in_dropped_loprio_bits_rate float,
    queue2_sap_in_dropped_loprio_bits_val float,
    queue2_sap_in_dropped_loprio_pkts_delta float,
    queue2_sap_in_dropped_loprio_pkts_rate float,
    queue2_sap_in_dropped_loprio_pkts_val float,
    queue2_sap_in_fwd_inprof_bits_delta float,
    queue2_sap_in_fwd_inprof_bits_rate float,
    queue2_sap_in_fwd_inprof_bits_val float,
    queue2_sap_in_fwd_inprof_pkts_delta float,
    queue2_sap_in_fwd_inprof_pkts_rate float,
    queue2_sap_in_fwd_inprof_pkts_val float,
    queue2_sap_in_fwd_outprof_bits_delta float,
    queue2_sap_in_fwd_outprof_bits_rate float,
    queue2_sap_in_fwd_outprof_bits_val float,
    queue2_sap_in_fwd_outprof_pkts_delta float,
    queue2_sap_in_fwd_outprof_pkts_rate float,
    queue2_sap_in_fwd_outprof_pkts_val float,
    queue2_sap_in_offered_hiprio_bits_delta float,
    queue2_sap_in_offered_hiprio_bits_rate float,
    queue2_sap_in_offered_hiprio_bits_val float,
    queue2_sap_in_offered_hiprio_pkts_delta float,
    queue2_sap_in_offered_hiprio_pkts_rate float,
    queue2_sap_in_offered_hiprio_pkts_val float,
    queue2_sap_in_offered_loprio_bits_delta float,
    queue2_sap_in_offered_loprio_bits_rate float,
    queue2_sap_in_offered_loprio_bits_val float,
    queue2_sap_in_offered_loprio_pkts_delta float,
    queue2_sap_in_offered_loprio_pkts_rate float,
    queue2_sap_in_offered_loprio_pkts_val float,
    queue2_sap_in_offered_uncolored_bits_delta float,
    queue2_sap_in_offered_uncolored_bits_rate float,
    queue2_sap_in_offered_uncolored_bits_val float,
    queue2_sap_in_offered_uncolored_pkts_delta float,
    queue2_sap_in_offered_uncolored_pkts_rate float,
    queue2_sap_in_offered_uncolored_pkts_val float,
    queue2_sap_out_dropped_inprof_bits_delta float,
    queue2_sap_out_dropped_inprof_bits_rate float,
    queue2_sap_out_dropped_inprof_bits_val float,
    queue2_sap_out_dropped_inprof_pkts_delta float,
    queue2_sap_out_dropped_inprof_pkts_rate float,
    queue2_sap_out_dropped_inprof_pkts_val float,
    queue2_sap_out_dropped_outprof_bits_delta float,
    queue2_sap_out_dropped_outprof_bits_rate float,
    queue2_sap_out_dropped_outprof_bits_val float,
    queue2_sap_out_dropped_outprof_pkts_delta float,
    queue2_sap_out_dropped_outprof_pkts_rate float,
    queue2_sap_out_dropped_outprof_pkts_val float,
    queue2_sap_out_fwd_inprof_bits_delta float,
    queue2_sap_out_fwd_inprof_bits_rate float,
    queue2_sap_out_fwd_inprof_bits_val float,
    queue2_sap_out_fwd_inprof_pkts_delta float,
    queue2_sap_out_fwd_inprof_pkts_rate float,
    queue2_sap_out_fwd_inprof_pkts_val float,
    queue2_sap_out_fwd_outprof_bits_delta float,
    queue2_sap_out_fwd_outprof_bits_rate float,
    queue2_sap_out_fwd_outprof_bits_val float,
    queue2_sap_out_fwd_outprof_pkts_delta float,
    queue2_sap_out_fwd_outprof_pkts_rate float,
    queue2_sap_out_fwd_outprof_pkts_val float,
    queue3_sap_in_dropped_hiprio_bits_delta float,
    queue3_sap_in_dropped_hiprio_bits_rate float,
    queue3_sap_in_dropped_hiprio_bits_val float,
    queue3_sap_in_dropped_hiprio_pkts_delta float,
    queue3_sap_in_dropped_hiprio_pkts_rate float,
    queue3_sap_in_dropped_hiprio_pkts_val float,
    queue3_sap_in_dropped_loprio_bits_delta float,
    queue3_sap_in_dropped_loprio_bits_rate float,
    queue3_sap_in_dropped_loprio_bits_val float,
    queue3_sap_in_dropped_loprio_pkts_delta float,
    queue3_sap_in_dropped_loprio_pkts_rate float,
    queue3_sap_in_dropped_loprio_pkts_val float,
    queue3_sap_in_fwd_inprof_bits_delta float,
    queue3_sap_in_fwd_inprof_bits_rate float,
    queue3_sap_in_fwd_inprof_bits_val float,
    queue3_sap_in_fwd_inprof_pkts_delta float,
    queue3_sap_in_fwd_inprof_pkts_rate float,
    queue3_sap_in_fwd_inprof_pkts_val float,
    queue3_sap_in_fwd_outprof_bits_delta float,
    queue3_sap_in_fwd_outprof_bits_rate float,
    queue3_sap_in_fwd_outprof_bits_val float,
    queue3_sap_in_fwd_outprof_pkts_delta float,
    queue3_sap_in_fwd_outprof_pkts_rate float,
    queue3_sap_in_fwd_outprof_pkts_val float,
    queue3_sap_in_offered_hiprio_bits_delta float,
    queue3_sap_in_offered_hiprio_bits_rate float,
    queue3_sap_in_offered_hiprio_bits_val float,
    queue3_sap_in_offered_hiprio_pkts_delta float,
    queue3_sap_in_offered_hiprio_pkts_rate float,
    queue3_sap_in_offered_hiprio_pkts_val float,
    queue3_sap_in_offered_loprio_bits_delta float,
    queue3_sap_in_offered_loprio_bits_rate float,
    queue3_sap_in_offered_loprio_bits_val float,
    queue3_sap_in_offered_loprio_pkts_delta float,
    queue3_sap_in_offered_loprio_pkts_rate float,
    queue3_sap_in_offered_loprio_pkts_val float,
    queue3_sap_in_offered_uncolored_bits_delta float,
    queue3_sap_in_offered_uncolored_bits_rate float,
    queue3_sap_in_offered_uncolored_bits_val float,
    queue3_sap_in_offered_uncolored_pkts_delta float,
    queue3_sap_in_offered_uncolored_pkts_rate float,
    queue3_sap_in_offered_uncolored_pkts_val float,
    queue3_sap_out_dropped_inprof_bits_delta float,
    queue3_sap_out_dropped_inprof_bits_rate float,
    queue3_sap_out_dropped_inprof_bits_val float,
    queue3_sap_out_dropped_inprof_pkts_delta float,
    queue3_sap_out_dropped_inprof_pkts_rate float,
    queue3_sap_out_dropped_inprof_pkts_val float,
    queue3_sap_out_dropped_outprof_bits_delta float,
    queue3_sap_out_dropped_outprof_bits_rate float,
    queue3_sap_out_dropped_outprof_bits_val float,
    queue3_sap_out_dropped_outprof_pkts_delta float,
    queue3_sap_out_dropped_outprof_pkts_rate float,
    queue3_sap_out_dropped_outprof_pkts_val float,
    queue3_sap_out_fwd_inprof_bits_delta float,
    queue3_sap_out_fwd_inprof_bits_rate float,
    queue3_sap_out_fwd_inprof_bits_val float,
    queue3_sap_out_fwd_inprof_pkts_delta float,
    queue3_sap_out_fwd_inprof_pkts_rate float,
    queue3_sap_out_fwd_inprof_pkts_val float,
    queue3_sap_out_fwd_outprof_bits_delta float,
    queue3_sap_out_fwd_outprof_bits_rate float,
    queue3_sap_out_fwd_outprof_bits_val float,
    queue3_sap_out_fwd_outprof_pkts_delta float,
    queue3_sap_out_fwd_outprof_pkts_rate float,
    queue3_sap_out_fwd_outprof_pkts_val float,
    queue4_sap_in_dropped_hiprio_bits_delta float,
    queue4_sap_in_dropped_hiprio_bits_rate float,
    queue4_sap_in_dropped_hiprio_bits_val float,
    queue4_sap_in_dropped_hiprio_pkts_delta float,
    queue4_sap_in_dropped_hiprio_pkts_rate float,
    queue4_sap_in_dropped_hiprio_pkts_val float,
    queue4_sap_in_dropped_loprio_bits_delta float,
    queue4_sap_in_dropped_loprio_bits_rate float,
    queue4_sap_in_dropped_loprio_bits_val float,
    queue4_sap_in_dropped_loprio_pkts_delta float,
    queue4_sap_in_dropped_loprio_pkts_rate float,
    queue4_sap_in_dropped_loprio_pkts_val float,
    queue4_sap_in_fwd_inprof_bits_delta float,
    queue4_sap_in_fwd_inprof_bits_rate float,
    queue4_sap_in_fwd_inprof_bits_val float,
    queue4_sap_in_fwd_inprof_pkts_delta float,
    queue4_sap_in_fwd_inprof_pkts_rate float,
    queue4_sap_in_fwd_inprof_pkts_val float,
    queue4_sap_in_fwd_outprof_bits_delta float,
    queue4_sap_in_fwd_outprof_bits_rate float,
    queue4_sap_in_fwd_outprof_bits_val float,
    queue4_sap_in_fwd_outprof_pkts_delta float,
    queue4_sap_in_fwd_outprof_pkts_rate float,
    queue4_sap_in_fwd_outprof_pkts_val float,
    queue4_sap_in_offered_hiprio_bits_delta float,
    queue4_sap_in_offered_hiprio_bits_rate float,
    queue4_sap_in_offered_hiprio_bits_val float,
    queue4_sap_in_offered_hiprio_pkts_delta float,
    queue4_sap_in_offered_hiprio_pkts_rate float,
    queue4_sap_in_offered_hiprio_pkts_val float,
    queue4_sap_in_offered_loprio_bits_delta float,
    queue4_sap_in_offered_loprio_bits_rate float,
    queue4_sap_in_offered_loprio_bits_val float,
    queue4_sap_in_offered_loprio_pkts_delta float,
    queue4_sap_in_offered_loprio_pkts_rate float,
    queue4_sap_in_offered_loprio_pkts_val float,
    queue4_sap_in_offered_uncolored_bits_delta float,
    queue4_sap_in_offered_uncolored_bits_rate float,
    queue4_sap_in_offered_uncolored_bits_val float,
    queue4_sap_in_offered_uncolored_pkts_delta float,
    queue4_sap_in_offered_uncolored_pkts_rate float,
    queue4_sap_in_offered_uncolored_pkts_val float,
    queue4_sap_out_dropped_inprof_bits_delta float,
    queue4_sap_out_dropped_inprof_bits_rate float,
    queue4_sap_out_dropped_inprof_bits_val float,
    queue4_sap_out_dropped_inprof_pkts_delta float,
    queue4_sap_out_dropped_inprof_pkts_rate float,
    queue4_sap_out_dropped_inprof_pkts_val float,
    queue4_sap_out_dropped_outprof_bits_delta float,
    queue4_sap_out_dropped_outprof_bits_rate float,
    queue4_sap_out_dropped_outprof_bits_val float,
    queue4_sap_out_dropped_outprof_pkts_delta float,
    queue4_sap_out_dropped_outprof_pkts_rate float,
    queue4_sap_out_dropped_outprof_pkts_val float,
    queue4_sap_out_fwd_inprof_bits_delta float,
    queue4_sap_out_fwd_inprof_bits_rate float,
    queue4_sap_out_fwd_inprof_bits_val float,
    queue4_sap_out_fwd_inprof_pkts_delta float,
    queue4_sap_out_fwd_inprof_pkts_rate float,
    queue4_sap_out_fwd_inprof_pkts_val float,
    queue4_sap_out_fwd_outprof_bits_delta float,
    queue4_sap_out_fwd_outprof_bits_rate float,
    queue4_sap_out_fwd_outprof_bits_val float,
    queue4_sap_out_fwd_outprof_pkts_delta float,
    queue4_sap_out_fwd_outprof_pkts_rate float,
    queue4_sap_out_fwd_outprof_pkts_val float,
    queue5_sap_in_dropped_hiprio_bits_delta float,
    queue5_sap_in_dropped_hiprio_bits_rate float,
    queue5_sap_in_dropped_hiprio_bits_val float,
    queue5_sap_in_dropped_hiprio_pkts_delta float,
    queue5_sap_in_dropped_hiprio_pkts_rate float,
    queue5_sap_in_dropped_hiprio_pkts_val float,
    queue5_sap_in_dropped_loprio_bits_delta float,
    queue5_sap_in_dropped_loprio_bits_rate float,
    queue5_sap_in_dropped_loprio_bits_val float,
    queue5_sap_in_dropped_loprio_pkts_delta float,
    queue5_sap_in_dropped_loprio_pkts_rate float,
    queue5_sap_in_dropped_loprio_pkts_val float,
    queue5_sap_in_fwd_inprof_bits_delta float,
    queue5_sap_in_fwd_inprof_bits_rate float,
    queue5_sap_in_fwd_inprof_bits_val float,
    queue5_sap_in_fwd_inprof_pkts_delta float,
    queue5_sap_in_fwd_inprof_pkts_rate float,
    queue5_sap_in_fwd_inprof_pkts_val float,
    queue5_sap_in_fwd_outprof_bits_delta float,
    queue5_sap_in_fwd_outprof_bits_rate float,
    queue5_sap_in_fwd_outprof_bits_val float,
    queue5_sap_in_fwd_outprof_pkts_delta float,
    queue5_sap_in_fwd_outprof_pkts_rate float,
    queue5_sap_in_fwd_outprof_pkts_val float,
    queue5_sap_in_offered_hiprio_bits_delta float,
    queue5_sap_in_offered_hiprio_bits_rate float,
    queue5_sap_in_offered_hiprio_bits_val float,
    queue5_sap_in_offered_hiprio_pkts_delta float,
    queue5_sap_in_offered_hiprio_pkts_rate float,
    queue5_sap_in_offered_hiprio_pkts_val float,
    queue5_sap_in_offered_loprio_bits_delta float,
    queue5_sap_in_offered_loprio_bits_rate float,
    queue5_sap_in_offered_loprio_bits_val float,
    queue5_sap_in_offered_loprio_pkts_delta float,
    queue5_sap_in_offered_loprio_pkts_rate float,
    queue5_sap_in_offered_loprio_pkts_val float,
    queue5_sap_in_offered_uncolored_bits_delta float,
    queue5_sap_in_offered_uncolored_bits_rate float,
    queue5_sap_in_offered_uncolored_bits_val float,
    queue5_sap_in_offered_uncolored_pkts_delta float,
    queue5_sap_in_offered_uncolored_pkts_rate float,
    queue5_sap_in_offered_uncolored_pkts_val float,
    queue5_sap_out_dropped_inprof_bits_delta float,
    queue5_sap_out_dropped_inprof_bits_rate float,
    queue5_sap_out_dropped_inprof_bits_val float,
    queue5_sap_out_dropped_inprof_pkts_delta float,
    queue5_sap_out_dropped_inprof_pkts_rate float,
    queue5_sap_out_dropped_inprof_pkts_val float,
    queue5_sap_out_dropped_outprof_bits_delta float,
    queue5_sap_out_dropped_outprof_bits_rate float,
    queue5_sap_out_dropped_outprof_bits_val float,
    queue5_sap_out_dropped_outprof_pkts_delta float,
    queue5_sap_out_dropped_outprof_pkts_rate float,
    queue5_sap_out_dropped_outprof_pkts_val float,
    queue5_sap_out_fwd_inprof_bits_delta float,
    queue5_sap_out_fwd_inprof_bits_rate float,
    queue5_sap_out_fwd_inprof_bits_val float,
    queue5_sap_out_fwd_inprof_pkts_delta float,
    queue5_sap_out_fwd_inprof_pkts_rate float,
    queue5_sap_out_fwd_inprof_pkts_val float,
    queue5_sap_out_fwd_outprof_bits_delta float,
    queue5_sap_out_fwd_outprof_bits_rate float,
    queue5_sap_out_fwd_outprof_bits_val float,
    queue5_sap_out_fwd_outprof_pkts_delta float,
    queue5_sap_out_fwd_outprof_pkts_rate float,
    queue5_sap_out_fwd_outprof_pkts_val float,
    queue6_sap_in_dropped_hiprio_bits_delta float,
    queue6_sap_in_dropped_hiprio_bits_rate float,
    queue6_sap_in_dropped_hiprio_bits_val float,
    queue6_sap_in_dropped_hiprio_pkts_delta float,
    queue6_sap_in_dropped_hiprio_pkts_rate float,
    queue6_sap_in_dropped_hiprio_pkts_val float,
    queue6_sap_in_dropped_loprio_bits_delta float,
    queue6_sap_in_dropped_loprio_bits_rate float,
    queue6_sap_in_dropped_loprio_bits_val float,
    queue6_sap_in_dropped_loprio_pkts_delta float,
    queue6_sap_in_dropped_loprio_pkts_rate float,
    queue6_sap_in_dropped_loprio_pkts_val float,
    queue6_sap_in_fwd_inprof_bits_delta float,
    queue6_sap_in_fwd_inprof_bits_rate float,
    queue6_sap_in_fwd_inprof_bits_val float,
    queue6_sap_in_fwd_inprof_pkts_delta float,
    queue6_sap_in_fwd_inprof_pkts_rate float,
    queue6_sap_in_fwd_inprof_pkts_val float,
    queue6_sap_in_fwd_outprof_bits_delta float,
    queue6_sap_in_fwd_outprof_bits_rate float,
    queue6_sap_in_fwd_outprof_bits_val float,
    queue6_sap_in_fwd_outprof_pkts_delta float,
    queue6_sap_in_fwd_outprof_pkts_rate float,
    queue6_sap_in_fwd_outprof_pkts_val float,
    queue6_sap_in_offered_hiprio_bits_delta float,
    queue6_sap_in_offered_hiprio_bits_rate float,
    queue6_sap_in_offered_hiprio_bits_val float,
    queue6_sap_in_offered_hiprio_pkts_delta float,
    queue6_sap_in_offered_hiprio_pkts_rate float,
    queue6_sap_in_offered_hiprio_pkts_val float,
    queue6_sap_in_offered_loprio_bits_delta float,
    queue6_sap_in_offered_loprio_bits_rate float,
    queue6_sap_in_offered_loprio_bits_val float,
    queue6_sap_in_offered_loprio_pkts_delta float,
    queue6_sap_in_offered_loprio_pkts_rate float,
    queue6_sap_in_offered_loprio_pkts_val float,
    queue6_sap_in_offered_uncolored_bits_delta float,
    queue6_sap_in_offered_uncolored_bits_rate float,
    queue6_sap_in_offered_uncolored_bits_val float,
    queue6_sap_in_offered_uncolored_pkts_delta float,
    queue6_sap_in_offered_uncolored_pkts_rate float,
    queue6_sap_in_offered_uncolored_pkts_val float,
    queue6_sap_out_dropped_inprof_bits_delta float,
    queue6_sap_out_dropped_inprof_bits_rate float,
    queue6_sap_out_dropped_inprof_bits_val float,
    queue6_sap_out_dropped_inprof_pkts_delta float,
    queue6_sap_out_dropped_inprof_pkts_rate float,
    queue6_sap_out_dropped_inprof_pkts_val float,
    queue6_sap_out_dropped_outprof_bits_delta float,
    queue6_sap_out_dropped_outprof_bits_rate float,
    queue6_sap_out_dropped_outprof_bits_val float,
    queue6_sap_out_dropped_outprof_pkts_delta float,
    queue6_sap_out_dropped_outprof_pkts_rate float,
    queue6_sap_out_dropped_outprof_pkts_val float,
    queue6_sap_out_fwd_inprof_bits_delta float,
    queue6_sap_out_fwd_inprof_bits_rate float,
    queue6_sap_out_fwd_inprof_bits_val float,
    queue6_sap_out_fwd_inprof_pkts_delta float,
    queue6_sap_out_fwd_inprof_pkts_rate float,
    queue6_sap_out_fwd_inprof_pkts_val float,
    queue6_sap_out_fwd_outprof_bits_delta float,
    queue6_sap_out_fwd_outprof_bits_rate float,
    queue6_sap_out_fwd_outprof_bits_val float,
    queue6_sap_out_fwd_outprof_pkts_delta float,
    queue6_sap_out_fwd_outprof_pkts_rate float,
    queue6_sap_out_fwd_outprof_pkts_val float,
    queue7_sap_in_dropped_hiprio_bits_delta float,
    queue7_sap_in_dropped_hiprio_bits_rate float,
    queue7_sap_in_dropped_hiprio_bits_val float,
    queue7_sap_in_dropped_hiprio_pkts_delta float,
    queue7_sap_in_dropped_hiprio_pkts_rate float,
    queue7_sap_in_dropped_hiprio_pkts_val float,
    queue7_sap_in_dropped_loprio_bits_delta float,
    queue7_sap_in_dropped_loprio_bits_rate float,
    queue7_sap_in_dropped_loprio_bits_val float,
    queue7_sap_in_dropped_loprio_pkts_delta float,
    queue7_sap_in_dropped_loprio_pkts_rate float,
    queue7_sap_in_dropped_loprio_pkts_val float,
    queue7_sap_in_fwd_inprof_bits_delta float,
    queue7_sap_in_fwd_inprof_bits_rate float,
    queue7_sap_in_fwd_inprof_bits_val float,
    queue7_sap_in_fwd_inprof_pkts_delta float,
    queue7_sap_in_fwd_inprof_pkts_rate float,
    queue7_sap_in_fwd_inprof_pkts_val float,
    queue7_sap_in_fwd_outprof_bits_delta float,
    queue7_sap_in_fwd_outprof_bits_rate float,
    queue7_sap_in_fwd_outprof_bits_val float,
    queue7_sap_in_fwd_outprof_pkts_delta float,
    queue7_sap_in_fwd_outprof_pkts_rate float,
    queue7_sap_in_fwd_outprof_pkts_val float,
    queue7_sap_in_offered_hiprio_bits_delta float,
    queue7_sap_in_offered_hiprio_bits_rate float,
    queue7_sap_in_offered_hiprio_bits_val float,
    queue7_sap_in_offered_hiprio_pkts_delta float,
    queue7_sap_in_offered_hiprio_pkts_rate float,
    queue7_sap_in_offered_hiprio_pkts_val float,
    queue7_sap_in_offered_loprio_bits_delta float,
    queue7_sap_in_offered_loprio_bits_rate float,
    queue7_sap_in_offered_loprio_bits_val float,
    queue7_sap_in_offered_loprio_pkts_delta float,
    queue7_sap_in_offered_loprio_pkts_rate float,
    queue7_sap_in_offered_loprio_pkts_val float,
    queue7_sap_in_offered_uncolored_bits_delta float,
    queue7_sap_in_offered_uncolored_bits_rate float,
    queue7_sap_in_offered_uncolored_bits_val float,
    queue7_sap_in_offered_uncolored_pkts_delta float,
    queue7_sap_in_offered_uncolored_pkts_rate float,
    queue7_sap_in_offered_uncolored_pkts_val float,
    queue7_sap_out_dropped_inprof_bits_delta float,
    queue7_sap_out_dropped_inprof_bits_rate float,
    queue7_sap_out_dropped_inprof_bits_val float,
    queue7_sap_out_dropped_inprof_pkts_delta float,
    queue7_sap_out_dropped_inprof_pkts_rate float,
    queue7_sap_out_dropped_inprof_pkts_val float,
    queue7_sap_out_dropped_outprof_bits_delta float,
    queue7_sap_out_dropped_outprof_bits_rate float,
    queue7_sap_out_dropped_outprof_bits_val float,
    queue7_sap_out_dropped_outprof_pkts_delta float,
    queue7_sap_out_dropped_outprof_pkts_rate float,
    queue7_sap_out_dropped_outprof_pkts_val float,
    queue7_sap_out_fwd_inprof_bits_delta float,
    queue7_sap_out_fwd_inprof_bits_rate float,
    queue7_sap_out_fwd_inprof_bits_val float,
    queue7_sap_out_fwd_inprof_pkts_delta float,
    queue7_sap_out_fwd_inprof_pkts_rate float,
    queue7_sap_out_fwd_inprof_pkts_val float,
    queue7_sap_out_fwd_outprof_bits_delta float,
    queue7_sap_out_fwd_outprof_bits_rate float,
    queue7_sap_out_fwd_outprof_bits_val float,
    queue7_sap_out_fwd_outprof_pkts_delta float,
    queue7_sap_out_fwd_outprof_pkts_rate float,
    queue7_sap_out_fwd_outprof_pkts_val float,
    _timestamp timestamptz not null,
    _processing_time float,
    _exit_time timestamptz,
    _collect_time_min timestamptz,
    metadata jsonb
);
SELECT create_hypertable('values_wide_inline', by_range('_timestamp'));



-- dataset #3, wide records, inline metadata
CREATE TABLE values_wide_inline_normalized
(
    in_bits_delta float,
    in_bits_rate float,
    in_bits_val float,
    in_dropped_hi_bits_delta float,
    in_dropped_hi_bits_rate float,
    in_dropped_hi_bits_val float,
    in_dropped_hi_pkts_delta float,
    in_dropped_hi_pkts_rate float,
    in_dropped_hi_pkts_val float,
    in_dropped_lo_bits_delta float,
    in_dropped_lo_bits_rate float,
    in_dropped_lo_bits_val float,
    in_dropped_lo_pkts_delta float,
    in_dropped_lo_pkts_rate float,
    in_dropped_lo_pkts_val float,
    in_fwd_inprof_bits_delta float,
    in_fwd_inprof_bits_rate float,
    in_fwd_inprof_bits_val float,
    in_fwd_inprof_pkts_delta float,
    in_fwd_inprof_pkts_rate float,
    in_fwd_inprof_pkts_val float,
    in_fwd_outprof_bits_delta float,
    in_fwd_outprof_bits_rate float,
    in_fwd_outprof_bits_val float,
    in_fwd_outprof_pkts_delta float,
    in_fwd_outprof_pkts_rate float,
    in_fwd_outprof_pkts_val float,
    in_mpls_bits_delta float,
    in_mpls_bits_rate float,
    in_mpls_bits_val float,
    in_pkts_delta float,
    in_pkts_rate float,
    in_pkts_val float,
    in_v4_bits_delta float,
    in_v4_bits_rate float,
    in_v4_bits_val float,
    in_v4_pkts_delta float,
    in_v4_pkts_rate float,
    in_v4_pkts_val float,
    in_v6_bits_delta float,
    in_v6_bits_rate float,
    in_v6_bits_val float,
    in_v6_pkts_delta float,
    in_v6_pkts_rate float,
    in_v6_pkts_val float,
    out_bits_delta float,
    out_bits_rate float,
    out_bits_val float,
    out_dropped_inprof_bits_delta float,
    out_dropped_inprof_bits_rate float,
    out_dropped_inprof_bits_val float,
    out_dropped_inprof_pkts_delta float,
    out_dropped_inprof_pkts_rate float,
    out_dropped_inprof_pkts_val float,
    out_dropped_outprof_bits_delta float,
    out_dropped_outprof_bits_rate float,
    out_dropped_outprof_bits_val float,
    out_dropped_outprof_pkts_delta float,
    out_dropped_outprof_pkts_rate float,
    out_dropped_outprof_pkts_val float,
    out_fwd_inprof_bits_delta float,
    out_fwd_inprof_bits_rate float,
    out_fwd_inprof_bits_val float,
    out_fwd_inprof_pkts_delta float,
    out_fwd_inprof_pkts_rate float,
    out_fwd_inprof_pkts_val float,
    out_fwd_outprof_bits_delta float,
    out_fwd_outprof_bits_rate float,
    out_fwd_outprof_bits_val float,
    out_fwd_outprof_pkts_delta float,
    out_fwd_outprof_pkts_rate float,
    out_fwd_outprof_pkts_val float,
    out_mpls_bits_delta float,
    out_mpls_bits_rate float,
    out_mpls_bits_val float,
    out_pkts_delta float,
    out_pkts_rate float,
    out_pkts_val float,
    out_v4_bits_delta float,
    out_v4_bits_rate float,
    out_v4_bits_val float,
    out_v4_discard_bits_delta float,
    out_v4_discard_bits_rate float,
    out_v4_discard_bits_val float,
    out_v4_discard_pkts_delta float,
    out_v4_discard_pkts_rate float,
    out_v4_discard_pkts_val float,
    out_v4_pkts_delta float,
    out_v4_pkts_rate float,
    out_v4_pkts_val float,
    out_v6_bits_delta float,
    out_v6_bits_rate float,
    out_v6_bits_val float,
    out_v6_discard_bits_delta float,
    out_v6_discard_bits_rate float,
    out_v6_discard_bits_val float,
    out_v6_discard_pkts_delta float,
    out_v6_discard_pkts_rate float,
    out_v6_discard_pkts_val float,
    out_v6_pkts_delta float,
    out_v6_pkts_rate float,
    out_v6_pkts_val float,
    _timestamp timestamptz not null,
    _processing_time float,
    _exit_time timestamptz,
    _collect_time_min timestamptz,
    "meta.intercloud" bool,
    "meta.vrtr_ifglobalindex" text,
    "meta.sap_in_policy"  text,
    "meta.remote.full_name" text,
    "meta.remote.short_name" text,
    "meta.org.types"  text,
    "meta.org.full_name"  text,
    "meta.org.hide" text,
    "meta.org.tags" text,
    "meta.org.short_name"  text,
    "meta.org.tags_str"  text,
    "meta.vrtr_iftype"  text,
    "meta.id"  text,
    "meta.sap_name"  text,
    "meta.descr" text,
    "meta.ipv6_prefix_len" text,
    "meta.svc_edge_id"  text,
    "meta.vrtr_ifoperstatus" text,
    "meta.sap_oper_status" text,
    "meta.device_info.network" text,
    "meta.device_info.loc_type" text,
    "meta.device_info.model" text,
    "meta.device_info.state" text,
    "meta.device_info.location.lat" text,
    "meta.device_info.location.lon" text,
    "meta.device_info.manufacturer" text,
    "meta.device_info.os" text,
    "meta.device_info.role" text,
    "meta.device_info.loc_name" text,
    "meta.vrtr_ifencapvalue" text,
    "meta.vrtr_name" text,
    "meta.service_type" text,
    "meta.vrtr_ifindex" text,
    "meta.ipv6" text,
    "meta.vrtr_ifdescr" text,
    "meta.sensor_id" text,
    "meta.descr_parts" text,
    "meta.device" text,
    "meta.vrtr_ifadminstatus" text,
    "meta.sap_egr_policy" text,
    "meta.port_name" text,
    "meta.oper_status" text,
    "meta.name" text,
    "meta.sap_admin_status" text,
    "meta.admin_status" text,
    "meta.peer.ipv6" text,
    "meta.peer.asn" text,
    "meta.sap_descr" text,
    queues jsonb
) WITH (
  timescaledb.hypertable,
  timescaledb.partition_column='_timestamp',
  timescaledb.segmentby='"meta.device_info.loc_name"',
  timescaledb.order_by='_timestamp DESC',
  timescaledb.chunk_interval='6 hour'
);

ALTER TABLE values_wide_inline_normalized SET (
  timescaledb.compress,
  timescaledb.compress_orderby='_timestamp DESC',
  timescaledb.compress_segmentby='"meta.device_info.loc_name"',
  timescaledb.compress_chunk_time_interval='6 hour'
);

SELECT add_compression_policy('values_wide_inline_normalized', INTERVAL '6 hour');

CREATE TABLE values_flow (
_exit_time timestamptz,
_processing_time float,
_timestamp timestamptz not null,
_end timestamptz,
_start timestamptz,
stitched_flows bool,
ts_id text,
type text,

"values.bits_per_second" float,
"values.duration" float,
"values.max_packet_len" float,
"values.max_ttl" float,
"values.min_packet_len" float,
"values.min_ttl" float,
"values.num_bits" float,
"values.num_packets" float,
"values.packets_per_second" float,

"meta.app_name" text,
"meta.app_name_detail" text,
"meta.app_port" text,
"meta.as_names" text,
"meta.as_names_str" text,
"meta.country_names" text,
"meta.country_names_str" text,
"meta.country_scope" text,
"meta.cric.dst" text,
"meta.cric.src" text,
"meta.device_info.loc_name" text,
"meta.device_info.loc_type" text,
"meta.device_info.location.lat" text,
"meta.device_info.location.lon" text,
"meta.device_info.manufacturer" text,
"meta.device_info.model" text,
"meta.device_info.network" text,
"meta.device_info.os" text,
"meta.device_info.role" text,
"meta.device_info.state" text,
"meta.dscp" text,
"meta.dst_as_name" text,
"meta.dst_asn" text,
"meta.dst_continent" text,
"meta.dst_country_name" text,
"meta.dst_ip" text,
"meta.dst_location.lat" text,
"meta.dst_location.lon" text,
"meta.dst_organization" text,
"meta.dst_port" text,
"meta.dst_preferred_location.lat" text,
"meta.dst_preferred_location.lon" text,
"meta.dst_preferred_org" text,
"meta.dst_pub_asn" text,
"meta.dst_region_iso_code" text,
"meta.dst_region_name" text,
"meta.five_tuple_id" text,
"meta.flow_type" text,
"meta.id" text,
"meta.iface_in.description" text,
"meta.iface_in.device" text,
"meta.iface_in.id" text,
"meta.iface_in.ifindex" text,
"meta.iface_in.intercloud" bool,
"meta.iface_in.ipv4" bool,
"meta.iface_in.ipv6" bool,
"meta.iface_in.lhcone" bool,
"meta.iface_in.name" text,
"meta.iface_in.netflow_index" text,
"meta.iface_in.peer.as_name" text,
"meta.iface_in.peer.asn" text,
"meta.iface_in.peer.ip" text,
"meta.iface_in.port_name" text,
"meta.iface_in.remote.device" text,
"meta.iface_in.remote.full_name" text,
"meta.iface_in.remote.id" text,
"meta.iface_in.remote.lldp_device" text,
"meta.iface_in.remote.lldp_port" text,
"meta.iface_in.remote.loc_name" text,
"meta.iface_in.remote.loc_type" text,
"meta.iface_in.remote.location.lat" text,
"meta.iface_in.remote.location.lon" text,
"meta.iface_in.remote.manufacturer" text,
"meta.iface_in.remote.model" text,
"meta.iface_in.remote.network" text,
"meta.iface_in.remote.os" text,
"meta.iface_in.remote.port" text,
"meta.iface_in.remote.role" text,
"meta.iface_in.remote.short_name" text,
"meta.iface_in.remote.state" text,
"meta.iface_in.site" text,
"meta.iface_in.speed" text,
"meta.iface_in.visibility" text,
"meta.iface_in.vrtrifglobalindex" text,
"meta.iface_in.vrtrifindex" text,
"meta.iface_in.vrtrname" text,
"meta.iface_out.description" text,
"meta.iface_out.device" text,
"meta.iface_out.id" text,
"meta.iface_out.ifindex" text,
"meta.iface_out.intercloud" bool,
"meta.iface_out.ipv4" bool,
"meta.iface_out.ipv6" bool,
"meta.iface_out.lhcone" bool,
"meta.iface_out.name" text,
"meta.iface_out.netflow_index" text,
"meta.iface_out.peer.asn" text,
"meta.iface_out.peer.ipv4" bool,
"meta.iface_out.peer.ipv6" bool,
"meta.iface_out.port_name" text,
"meta.iface_out.remote.device" text,
"meta.iface_out.remote.full_name" text,
"meta.iface_out.remote.id" text,
"meta.iface_out.remote.lldp_device" text,
"meta.iface_out.remote.lldp_port" text,
"meta.iface_out.remote.loc_name" text,
"meta.iface_out.remote.loc_type" text,
"meta.iface_out.remote.location.lat" text,
"meta.iface_out.remote.location.lon" text,
"meta.iface_out.remote.manufacturer" text,
"meta.iface_out.remote.model" text,
"meta.iface_out.remote.network" text,
"meta.iface_out.remote.os" text,
"meta.iface_out.remote.port" text,
"meta.iface_out.remote.role" text,
"meta.iface_out.remote.short_name" text,
"meta.iface_out.remote.state" text,
"meta.iface_out.site" text,
"meta.iface_out.speed" text,
"meta.iface_out.visibility" text,
"meta.iface_out.vrtrifglobalindex" text,
"meta.iface_out.vrtrifindex" text,
"meta.iface_out.vrtrname" text,
"meta.ip_tos" text,
"meta.ip_version" text,
"meta.ipv6.flow_label" text,
"meta.is_l2" bool,
"meta.is_network_testing" text,
"meta.protocol" text,
"meta.region_iso_codes" text,
"meta.region_iso_codes_str" text,
"meta.region_names" text,
"meta.region_names_str" text,
"meta.router.ip" text,
"meta.router.name" text,
"meta.sensor_id" text,
"meta.src_as_name" text,
"meta.src_asn" text,
"meta.src_continent" text,
"meta.src_country_name" text,
"meta.src_ip" text,
"meta.src_location.lat" text,
"meta.src_location.lon" text,
"meta.src_organization" text,
"meta.src_port" text,
"meta.src_preferred_location.lat" text,
"meta.src_preferred_location.lon" text,
"meta.src_preferred_org" text,
"meta.src_pub_asn" text,
"meta.src_region_iso_code" text,
"meta.src_region_name" text,
"meta.traffic_class" text,
"meta.vrf.egress_id" text,
"meta.vrf.ingress_id" text,

bgp jsonb,
esdb jsonb,
mpls jsonb,
scireg jsonb
) WITH (
  timescaledb.hypertable,
  timescaledb.partition_column='_timestamp',
  timescaledb.segmentby='"meta.device_info.loc_name"',
  timescaledb.order_by='_timestamp DESC',
  timescaledb.chunk_interval='6 hour'
);

ALTER TABLE values_wide_inline_normalized SET (
  timescaledb.compress,
  timescaledb.compress_orderby='_timestamp DESC',
  timescaledb.compress_segmentby='"meta.device_info.loc_name"',
  timescaledb.compress_chunk_time_interval='6 hour'
);

SELECT add_compression_policy('values_flow', INTERVAL '6 hour');
